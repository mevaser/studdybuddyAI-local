<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>Teacher Dashboard - StudyBuddy</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
    <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet" />
    <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet" />
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet" />
    <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet" />

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet" />
  </head>

  <body>
    <!-- ======= Header ======= -->
    <header id="header" class="header fixed-top d-flex align-items-center">
      <div class="d-flex align-items-center justify-content-between">
        <a href="index.html" class="logo d-flex align-items-center">
          <img
            src="https://studybudybucket.s3.us-east-1.amazonaws.com/studdybuddyAI-local/assets/img/logo.png"
            alt="Logo"
          />
          <span class="d-none d-lg-block">StudyBuddy</span>
        </a>
        <i class="bi bi-list toggle-sidebar-btn"></i>
      </div>
      <!-- End Logo -->

      <nav class="header-nav ms-auto">
        <ul class="d-flex align-items-center">
          <li class="nav-item dropdown pe-3">
            <a
              class="nav-link nav-profile d-flex align-items-center pe-0"
              href="#"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <span
                id="user-dropdown-label"
                class="d-none d-md-block dropdown-toggle ps-2"
              >
                Profile
              </span>
            </a>
            <!-- End Profile Image Icon -->

            <ul
              class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile"
              style="
                position: absolute;
                inset: 0px 0px auto auto;
                margin: 0px;
                transform: translate3d(-15.4286px, 37.7143px, 0px);
              "
              data-popper-placement="bottom-end"
            >
              <li class="dropdown-header">
                <h6 id="fullname" class="user-name"></h6>
              </li>
              <li>
                <hr class="dropdown-divider" />
              </li>

              <li>
                <a
                  class="dropdown-item d-flex align-items-center"
                  href="users-profile.html"
                >
                  <i class="bi bi-person"></i>
                  <span>My Profile</span>
                </a>
              </li>
              <li>
                <hr class="dropdown-divider" />
              </li>

              <li>
                <hr class="dropdown-divider" />
              </li>
              <li>
                <hr class="dropdown-divider" />
              </li>

              <li>
                <a
                  id="signOutButton"
                  class="dropdown-item d-flex align-items-center"
                  href="#"
                  style="display: none"
                  ><i class="bi bi-box-arrow-in-right"></i>
                  <span>Login</span></a
                >
              </li>
            </ul>
            <!-- End Profile Dropdown Items -->
          </li>
        </ul>
      </nav>
      <!-- End Icons Navigation -->
    </header>
    <!-- End Header -->

    <!-- ======= Sidebar ======= -->
    <aside id="sidebar" class="sidebar">
      <ul class="sidebar-nav" id="sidebar-nav">
        <li class="nav-item">
          <a class="nav-link collapsed" href="index.html">
            <i class="bi bi-grid"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <!-- End Dashboard Nav -->

        <li class="nav-item">
          <a class="nav-link collapsed" href="users-profile.html">
            <i class="bi bi-person"></i>
            <span>Profile</span>
          </a>
        </li>
        <!-- End Profile Page Nav -->

        <li class="nav-item">
          <a class="nav-link" href="pages-chat.html">
            <i class="bi bi-envelope"></i>
            <span>Chat</span>
          </a>
        </li>
        <!-- End Chat Page Nav -->

        <li class="nav-item">
          <a class="nav-link" href="pages-teacher.html">
            <i class="bi bi-envelope"></i>
            <span>Teacher</span>
          </a>
        </li>
        <!-- End Teacher Page Nav -->

        <li class="nav-item">
          <a id="authButton" class="nav-link collapsed" href="#">
            <i class="bi bi-box-arrow-right"></i>
            <span>Login</span>
          </a>
        </li>
        <!-- End Login Page Nav -->
      </ul>
    </aside>
    <!-- End Sidebar-->

    <!-- ======= Main Content ======= -->
    <main id="main" class="main">
      <div class="pagetitle">
        <h1>Teacher Dashboard</h1>
        <nav>
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
            <li class="breadcrumb-item active">Teacher Dashboard</li>
          </ol>
        </nav>
      </div>
      <div
        id="error-box"
        class="alert alert-danger"
        style="display: none"
      ></div>

      <!-- Nav Tabs -->
      <ul class="nav nav-tabs mb-4" id="teacherTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="students-tab"
            data-bs-toggle="tab"
            data-bs-target="#students-pane"
            type="button"
            role="tab"
          >
            Students
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="stats-tab"
            data-bs-toggle="tab"
            data-bs-target="#stats-pane"
            type="button"
            role="tab"
          >
            Stats
          </button>
        </li>
      </ul>

      <!-- Tab Panes -->
      <div class="tab-content" id="teacherTabsContent">
        <!-- Students Pane -->
        <div
          class="tab-pane fade show active"
          id="students-pane"
          role="tabpanel"
        >
          <section class="section dashboard">
            <div class="row">
              <!-- Students Count Card -->
              <div class="col-lg-4 col-md-6">
                <div class="card info-card">
                  <div class="card-body">
                    <h5 class="card-title">Students <span>| Total</span></h5>
                    <div class="d-flex align-items-center">
                      <div
                        class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                      >
                        <i class="bi bi-people"></i>
                      </div>
                      <div class="ps-3">
                        <h6 id="total-students"></h6>
                        <span class="text-success small pt-1 fw-bold">+0%</span>
                        <span class="text-muted small pt-2 ps-1">increase</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Students List Table -->
              <div class="col-12">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Students List</h5>
                    <div class="table-responsive">
                      <table
                        class="table table-striped datatable"
                        id="students-table"
                      >
                        <thead>
                          <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Bio</th>
                            <th>LinkedIn</th>
                          </tr>
                        </thead>
                        <tbody>
                          <!-- JavaScript will populate rows -->
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- Stats Pane -->
        <div class="tab-pane fade" id="stats-pane" role="tabpanel">
          <section class="section dashboard">
            <!-- ðŸ“… Date Range Selector -->
            <div class="row mb-3">
              <div class="col-md-3">
                <label for="start-date" class="form-label">Start Date</label>
                <input type="date" id="start-date" class="form-control" />
              </div>
              <div class="col-md-3">
                <label for="end-date" class="form-label">End Date</label>
                <input type="date" id="end-date" class="form-control" />
              </div>
              <div class="col-md-3 d-flex align-items-end">
                <button id="load-stats" class="btn btn-primary w-100">
                  Load Stats
                </button>
              </div>
            </div>

            <!-- âœ… Optional Filters -->
            <div class="row mb-4">
              <div class="col-md-3">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="includeTop5"
                    checked
                  />
                  <label class="form-check-label" for="includeTop5">
                    Include Top 5
                  </label>
                </div>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="includeInactive"
                    checked
                  />
                  <label class="form-check-label" for="includeInactive">
                    Include Inactive Users
                  </label>
                </div>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="includeRecommendations"
                    checked
                  />
                  <label class="form-check-label" for="includeRecommendations">
                    Include Recommendations for Lecturer
                  </label>
                </div>
              </div>
            </div>
            <div id="loader" class="loader" hidden>
              <div class="loader-spinner"></div>
              <div class="loader-text">Loading statistics...</div>
            </div>

            <!-- ðŸ“Š Charts & Insights -->
            <div class="row">
              <!-- Lecturer Recommendations -->
              <div class="col-12 mb-4 d-none" id="card-recommendations">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Recommendations for Lecturer</h5>
                    <pre
                      id="recommendations-box"
                      class="mt-2"
                      style="white-space: pre-wrap"
                    ></pre>
                  </div>
                </div>
              </div>

              <!-- Networking Topics -->
              <div class="col-lg-6 mb-4">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Top Topics - Networking</h5>
                    <canvas id="chart-topics-networking" height="200"></canvas>
                  </div>
                </div>
              </div>

              <!-- C# Topics -->
              <div class="col-lg-6 mb-4">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Top Topics - C#</h5>
                    <canvas id="chart-topics-csharp" height="200"></canvas>
                  </div>
                </div>
              </div>

              <!-- Topic Breakdown (Left) -->
              <div class="col-lg-6 mb-4 d-flex align-items-stretch">
                <div class="card w-100">
                  <div class="card-body">
                    <h5 class="card-title">Topic Breakdown (Stacked)</h5>
                    <div class="chart-container-scrollable">
                      <canvas id="chart-breakdown"></canvas>
                      <div style="text-align: right">
                        <button
                          id="legendBtn"
                          class="btn btn-sm btn-outline-secondary"
                          style="margin-bottom: 4px"
                        >
                          Show Full Legend
                        </button>
                      </div>
                      <div id="legendPopup"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Frequent Questions (Right) -->
              <div class="col-lg-6 mb-4 d-flex align-items-stretch">
                <div class="card w-100">
                  <div class="card-body">
                    <h5 class="card-title">Frequent Questions</h5>
                    <canvas id="chart-frequent-questions" height="200"></canvas>
                  </div>
                </div>
              </div>

              <!-- Top 5 Students -->
              <div class="col-lg-6 mb-4 d-none" id="card-top5">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Top 5 Students</h5>
                    <canvas id="chart-top5" height="200"></canvas>
                  </div>
                </div>
              </div>

              <!-- Inactive Users -->
              <div class="col-lg-6 mb-4 d-none" id="card-inactive">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">
                      Inactive Users (&lt; 5 Questions)
                    </h5>
                    <canvas id="chart-inactive" height="200"></canvas>
                  </div>
                </div>
              </div>

              <div class="row">
                <!-- Questions Over Time -->
                <div class="col-lg-6 mb-4">
                  <div class="card h-100">
                    <div class="card-body">
                      <h5 class="card-title">Questions Over Time</h5>
                      <canvas id="chart-questions-time" height="200"></canvas>
                    </div>
                  </div>
                </div>

                <!-- Questions Over Time by Student -->
                <div class="col-lg-6 mb-4">
                  <div class="card h-100">
                    <div class="card-body">
                      <h5 class="card-title">Questions Over Time by Student</h5>
                      <select
                        id="studentSelect"
                        class="form-control mb-3"
                      ></select>
                      <canvas id="studentChart" height="200"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>
    <!-- End Main Content -->

    <!-- Vendor JS Files -->
    <script src="https://studybudybucket.s3.us-east-1.amazonaws.com/studdybuddyAI-local/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/chart.js/chart.umd.js"></script>
    <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
    <script type="module" src="assets/js/pages-teacher.js"></script>
    <script type="module" src="assets/js/main.js"></script>
  </body>
</html>
